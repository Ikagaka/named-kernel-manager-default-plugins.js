{"version":3,"sources":["lib/operation.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;IAEa,gB,WAAA,gB;;;;;;;0BACL,M,EAAQ;AACZ,aAAO,UAAP,CAAkB,qBAAlB,EAAyC,UAAC,MAAD,EAAY;AACnD,eAAO,IAAP,CAAY,oBAAZ,EAAkC,UAAC,MAAD,EAAY;AAC5C,iBAAO,KAAP,CAAa,OAAb,EAAsB,UAAtB;AACA,iBAAO,KAAP,CAAa,MAAb;AACA,iBAAO,KAAP,CAAa,OAAb;AACA,iBAAO,KAAP,CAAa,MAAb;AACD,SALD;AAMD,OAPD;AAQD;;;;;AAGH;;;IACa,mB,WAAA,mB;;;AACX,+BAAY,OAAZ,EAAqB;AAAA;AAAA,wHACb,OADa;AAEpB;;;;;;;;;;;;;;uBAGuB,KAAK,OAAL,CAAa,OAAb,E;;;AAAhB,uB;AACA,sB,GAAS,QAAQ,MAAR,IAAkB,QAAQ,MAAR,CAAe,MAAjC,GAA0C,QAAQ,MAAlD,GAA2D,CAAC,IAAD,C,EAAQ;AAClF;;AACA,uBAAO,GAAP,CAAW,UAAC,SAAD;AAAA,yBAAe,OAAK,OAAL,CAAa,SAAb,CAAuB,SAAvB,EAAkC,IAAlC,CAAuC,UAAC,MAAD;AAAA,2BAAY,OAAO,KAAP,EAAZ;AAAA,mBAAvC,CAAf;AAAA,iBAAX;;;;;;;;;;;;;;;;;;;;AAIJ,kDAA8B,mBAA9B,GAAoD,mBAApD;AACA,+CAA2B,IAA3B,CAAgC,gBAAhC","file":"operation.js","sourcesContent":["import {NamedKernelManagerRoutings, NamedKernelManagerControllers, NamedKernelManagerController} from 'named-kernel-manager';\r\n\r\nexport class OperationRouting {\r\n  setup(routes) {\r\n    routes.controller('OperationController', (routes) => {\r\n      routes.from('NamedKernelManager', (routes) => {\r\n        routes.event('start', 'boot_all');\r\n        routes.event('boot');\r\n        routes.event('close');\r\n        routes.event('halt');\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n// TODO 分け方がざっくりしている\r\nexport class OperationController extends NamedKernelManagerController {\r\n  constructor(manager) {\r\n    super(manager);\r\n  }\r\n\r\n  async boot_all() {\r\n    const profile = await this.manager.profile();\r\n    const ghosts = profile.ghosts && profile.ghosts.length ? profile.ghosts : ['js']; // TODO: 無ゴースト起動\r\n    // TODO: 他形式対応\r\n    ghosts.map((ghostname) => this.manager.loadGhost(ghostname).then((kernel) => kernel.start()));\r\n  }\r\n}\r\n\r\nNamedKernelManagerControllers.OperationController = OperationController;\r\nNamedKernelManagerRoutings.push(OperationRouting);\r\n"]}